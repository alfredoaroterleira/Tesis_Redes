pct_potable    = "% de hogares con agua potable",
pct_riesgo     = "% de hogares en riesgo (def. 2020=No potable; 2021+ añade cloro)",
pct_todos_dias = "% de hogares con servicio todos los días",
pct_paga       = "% de hogares que pagan por el servicio",
med_horas_dia  = "Mediana de horas de servicio al día",
med_gasto_total= "Mediana del gasto mensual en agua (S/)")),
subtitle = paste0("Top ", top_n, " territorios (ordenados por ", ifelse(ordenar_por=="prom","promedio","último año"),")"),
x = NULL, y = ifelse(formato_pct, "Porcentaje", NULL),
color = NULL,
caption = "Fuente: ENAHO 2020–2024"
) +
theme_minimal(base_size = 11) +
theme(legend.position = "right",
plot.title = element_text(face="bold"))
}
# 3b) Heatmap año × territorio (ideal para ver patrones en todos los depts)
plot_heatmap_geo <- function(ind_df, indicador = c("pct_potable","pct_riesgo","pct_todos_dias","pct_paga"),
top_n = Inf) {
indicador <- match.arg(indicador)
# orden por promedio del indicador
orden <- ind_df %>%
group_by(geo) %>%
summarise(prom = mean(!!sym(indicador), na.rm = TRUE)) %>%
arrange(desc(prom)) %>%
slice_head(n = top_n) %>%
pull(geo)
dfp <- ind_df %>%
filter(geo %in% orden) %>%
mutate(geo = factor(geo, levels = rev(orden)))
ggplot(dfp, aes(x = factor(anio), y = geo, fill = !!sym(indicador))) +
geom_tile(color = "white", size = 0.3) +
scale_fill_gradient(low = "#FEE5D9", high = "#A50F15", labels = percent) +
labs(
title = paste0("Heatmap: ", switch(indicador,
pct_potable    = "% de hogares con agua potable",
pct_riesgo     = "% en riesgo (2020=No potable; 2021+ añade cloro)",
pct_todos_dias = "% con servicio todos los días",
pct_paga       = "% que pagan por el servicio)")),
x = "Año", y = NULL, fill = "Valor",
caption = "Fuente: ENAHO 2020–2024"
) +
theme_minimal(base_size = 11) +
theme(panel.grid = element_blank())
}
# 3c) Slopegraph: cambio 2020 → 2024 (solo extremos) ------------------------
plot_slope_2020_2024 <- function(ind_df, indicador = c("pct_potable","pct_riesgo","pct_todos_dias","pct_paga"),
top_changes = 12) {
indicador <- match.arg(indicador)
extremos <- ind_df %>%
filter(anio %in% c(2020, 2024)) %>%
select(geo, anio, !!sym(indicador)) %>%
pivot_wider(names_from = anio, values_from = !!sym(indicador), names_prefix = "y") %>%
mutate(delta = y2024 - y2020) %>%
filter(!is.na(delta)) %>%
arrange(desc(abs(delta))) %>%
slice_head(n = top_changes) %>%
mutate(geo = fct_reorder(geo, delta))
ggplot(extremos) +
geom_segment(aes(x = 2020, xend = 2024, y = y2020, yend = y2024, color = delta), size = 1) +
geom_point(aes(x = 2020, y = y2020), size = 2) +
geom_point(aes(x = 2024, y = y2024), size = 2) +
scale_x_continuous(breaks = c(2020, 2024)) +
scale_y_continuous(labels = percent) +
scale_color_gradient2(low = "#D73027", mid = "gray60", high = "#1F78B4", midpoint = 0) +
facet_wrap(~ geo, ncol = 3, scales = "free_y") +
labs(
title = paste0("Cambio 2020→2024: ", switch(indicador,
pct_potable    = "% con agua potable",
pct_riesgo     = "% en riesgo",
pct_todos_dias = "% con servicio todos los días",
pct_paga       = "% que pagan por el servicio")),
subtitle = paste0("Top ", top_changes, " mayores variaciones absolutas"),
x = NULL, y = "Porcentaje", color = "Δ 2024–2020",
caption = "Fuente: ENAHO 2020–2024"
) +
theme_minimal(base_size = 11) +
theme(plot.title = element_text(face="bold"))
}
plot_linea_geo(ind_depto, indicador = "pct_potable", top_n = 12, ordenar_por = "ultimo", formato_pct = TRUE)
# Instalación de paquetes
#install.packages("haven")
#install.packages("rio)
#install.packages("dplyr")
#install.packages("stringr")
#install.packages("tidyr")
#install.packages("forcats")
#install.packages("scales")
#install.packages("ggplot2")
#install.packages("readxl")
# Carga de librerías
library(haven)
library(rio)
library(dplyr)
library(stringr)
library(tidyr)
library(forcats)
library(scales)
library(ggplot2)
library(readxl)
library(rlang)
# ---- Paleta Sí/No y tema ----
pal_si_no <- c("No" = "#D73027", "Sí" = "#1F78B4")  # Rojo No, Azul Sí
scale_fill_si_no <- function(...) scale_fill_manual(values = pal_si_no, ...)
tema_apoyo <- function(base_size = 11) {
theme_minimal(base_size = base_size) +
theme(
plot.title  = element_text(hjust = 0.5, face = "bold"),
plot.subtitle = element_text(hjust = 0.5),
plot.caption  = element_text(hjust = 1),
plot.caption.position = "plot",
legend.position = "right",
panel.grid.minor = element_blank()
)
}
# Función de limpieza mínima + etiqueta de año
prep_anio <- function(df, anio) {
nm <- names(df)
df %>%
mutate(
anio = as.integer(anio),
# Aseguramos tipos de texto para comparaciones
agua_potable    = if ("agua_potable"    %in% nm) as.character(agua_potable) else NA_character_,
agua_todos_dias = if ("agua_todos_dias" %in% nm) as.character(agua_todos_dias) else NA_character_,
paga_servicio   = if ("paga_servicio"   %in% nm) as.character(paga_servicio) else NA_character_,
cloro_residual  = if ("cloro_residual"  %in% nm) as.character(cloro_residual) else NA_character_,
departamento    = if ("departamento"    %in% nm) as.character(departamento) else NA_character_,
provincia       = if ("provincia"       %in% nm) as.character(provincia) else NA_character_,
distrito        = if ("distrito"        %in% nm) as.character(distrito) else NA_character_,
horas_dia_diario= if ("horas_dia_diario"%in% nm) ifelse(horas_dia_diario %in% 1:24, horas_dia_diario, NA_integer_) else NA_integer_,
gasto_agua_total= if ("gasto_agua_total"%in% nm) as.numeric(gasto_agua_total) else NA_real_
)
}
enaho_all <- bind_rows(
prep_anio(enaho2020, 2020),
prep_anio(enaho2021, 2021),
prep_anio(enaho2022, 2022),
prep_anio(enaho2023, 2023),
prep_anio(enaho2024, 2024)
)
# Definición de "riesgo":
# - 2020: riesgo = (agua_potable == "No")  (no hay cloro_residual utilizable)
# - 2021+ : riesgo = (No potable) OR (cloro_residual en c("Dosificación inadecuada","Sin cloro"))
enaho_all <- enaho_all %>%
mutate(
riesgo = case_when(
anio == 2020 ~ ifelse(agua_potable == "No", TRUE, FALSE),
anio >= 2021 ~ (agua_potable == "No") | (cloro_residual %in% c("Dosificación inadecuada","Sin cloro")),
TRUE ~ NA
)
)
# geo: "departamento" | "provincia" | "distrito"
indicadores_por_geo <- function(df, geo = c("departamento","provincia","distrito")) {
geo <- match.arg(geo)
stopifnot(geo %in% names(df))
out <- df %>%
group_by(anio, .data[[geo]]) %>%
summarise(
n               = n(),
pct_potable     = mean(agua_potable == "Sí", na.rm = TRUE),
pct_todos_dias  = mean(agua_todos_dias == "Sí", na.rm = TRUE),
pct_paga        = mean(paga_servicio == "Sí", na.rm = TRUE),
pct_riesgo      = mean(riesgo, na.rm = TRUE),
med_horas_dia   = median(horas_dia_diario, na.rm = TRUE),
med_gasto_total = median(gasto_agua_total, na.rm = TRUE),
.groups = "drop"
) %>%
mutate(across(where(is.numeric), ~ ifelse(is.finite(.x), .x, NA_real_))) %>%
rename(geo = !!geo)
# Aseguramos tipos
out <- out %>% mutate(anio = as.integer(anio), geo = as.character(geo))
out
}
# Crea tablas de indicadores
ind_depto <- indicadores_por_geo(enaho_all, "departamento")
ind_prov  <- indicadores_por_geo(enaho_all, "provincia")
# ind_dist  <- indicadores_por_geo(enaho_all, "distrito")  # si lo necesitas
# 3a) Línea de evolución (selecciona top_n territorios)
plot_linea_geo <- function(ind_df,
indicador = c("pct_potable","pct_riesgo","pct_todos_dias","pct_paga","med_horas_dia","med_gasto_total"),
top_n = 12, ordenar_por = c("ultimo","prom"), formato_pct = TRUE) {
indicador   <- match.arg(indicador)
ordenar_por <- match.arg(ordenar_por)
# Ordena por año dentro de cada geo para calcular "último"
rank_df <- ind_df %>%
group_by(geo) %>%
arrange(anio, .by_group = TRUE) %>%
summarise(
val_ultimo = dplyr::last(!!sym(indicador)),
val_prom   = mean(!!sym(indicador), na.rm = TRUE),
.groups = "drop"
)
base <- ind_df %>%
inner_join(rank_df, by = "geo") %>%
mutate(orden = ifelse(ordenar_por == "prom", val_prom, val_ultimo)) %>%
group_by(geo) %>%
filter(all(!is.na(!!sym(indicador)))) %>%
ungroup() %>%
slice_max(order_by = orden, n = top_n, with_ties = FALSE) %>%
mutate(geo = fct_reorder(geo, orden))
ggplot(base, aes(x = anio, y = !!sym(indicador), color = geo, group = geo)) +
geom_line(size = 1) +
geom_point(size = 2) +
scale_x_continuous(breaks = sort(unique(base$anio))) +
{ if (formato_pct) scale_y_continuous(labels = percent) else scale_y_continuous() } +
labs(
title = paste0("Evolución de ", switch(indicador,
pct_potable    = "% de hogares con agua potable",
pct_riesgo     = "% de hogares en riesgo (2020=No potable; 2021+ añade cloro)",
pct_todos_dias = "% con servicio todos los días",
pct_paga       = "% que pagan por el servicio",
med_horas_dia  = "Mediana de horas de servicio al día",
med_gasto_total= "Mediana del gasto mensual en agua (S/)")),
subtitle = paste0("Top ", top_n, " territorios (ordenados por ",
ifelse(ordenar_por=="prom","promedio","último año"),")"),
x = NULL, y = ifelse(formato_pct, "Porcentaje", NULL), color = NULL,
caption = "Fuente: ENAHO 2020–2024"
) +
tema_apoyo()
}
# 3b) Heatmap año × territorio
plot_heatmap_geo <- function(ind_df,
indicador = c("pct_potable","pct_riesgo","pct_todos_dias","pct_paga"),
top_n = Inf) {
indicador <- match.arg(indicador)
orden <- ind_df %>%
group_by(geo) %>%
summarise(prom = mean(!!sym(indicador), na.rm = TRUE), .groups = "drop") %>%
arrange(desc(prom)) %>%
slice_head(n = top_n) %>%
pull(geo)
dfp <- ind_df %>%
filter(geo %in% orden) %>%
mutate(geo = factor(geo, levels = rev(orden)),
anio = factor(anio, levels = sort(unique(ind_df$anio))))
ggplot(dfp, aes(x = anio, y = geo, fill = !!sym(indicador))) +
geom_tile(color = "white", linewidth = 0.3) +
scale_fill_gradient(low = "#FEE5D9", high = "#A50F15", labels = percent) +
labs(
title = paste0("Heatmap: ", switch(indicador,
pct_potable    = "% con agua potable",
pct_riesgo     = "% en riesgo (2020=No potable; 2021+ añade cloro)",
pct_todos_dias = "% con servicio todos los días",
pct_paga       = "% que pagan por el servicio")),
x = "Año", y = NULL, fill = "Valor", caption = "Fuente: ENAHO 2020–2024"
) +
tema_apoyo() +
theme(panel.grid = element_blank())
}
# 3c) Slopegraph: cambio 2020 → 2024 (mayores variaciones absolutas)
plot_slope_2020_2024 <- function(ind_df,
indicador = c("pct_potable","pct_riesgo","pct_todos_dias","pct_paga"),
top_changes = 12) {
indicador <- match.arg(indicador)
extremos <- ind_df %>%
filter(anio %in% c(2020, 2024)) %>%
select(geo, anio, !!sym(indicador)) %>%
pivot_wider(names_from = anio, values_from = !!sym(indicador), names_prefix = "y") %>%
mutate(delta = y2024 - y2020) %>%
filter(!is.na(delta)) %>%
arrange(desc(abs(delta))) %>%
slice_head(n = top_changes) %>%
mutate(geo = fct_reorder(geo, delta))
ggplot(extremos) +
geom_segment(aes(x = 2020, xend = 2024, y = y2020, yend = y2024, color = delta), linewidth = 1) +
geom_point(aes(x = 2020, y = y2020), size = 2) +
geom_point(aes(x = 2024, y = y2024), size = 2) +
scale_x_continuous(breaks = c(2020, 2024)) +
scale_y_continuous(labels = percent) +
scale_color_gradient2(low = "#D73027", mid = "gray60", high = "#1F78B4", midpoint = 0, labels = percent) +
facet_wrap(~ geo, ncol = 3, scales = "free_y") +
labs(
title = paste0("Cambio 2020 → 2024: ", switch(indicador,
pct_potable    = "% con agua potable",
pct_riesgo     = "% en riesgo",
pct_todos_dias = "% con servicio todos los días",
pct_paga       = "% que pagan por el servicio")),
subtitle = paste0("Top ", top_changes, " mayores variaciones absolutas"),
x = NULL, y = "Porcentaje", color = "Δ 2024–2020",
caption = "Fuente: ENAHO 2020–2024"
) +
tema_apoyo()
}
# 4.1 Línea: % con agua potable por departamento (Top 12, orden por último año)
plot_linea_geo(ind_depto, indicador = "pct_potable", top_n = 12, ordenar_por = "ultimo", formato_pct = TRUE)
# ---- Librerías ----
library(dplyr)
library(tidyr)
library(ggplot2)
library(forcats)
library(scales)
library(stringr)
library(rlang)
# ---- Paleta Sí/No y tema ----
pal_si_no <- c("No" = "#D73027", "Sí" = "#1F78B4")
scale_fill_si_no <- function(...) scale_fill_manual(values = pal_si_no, ...)
tema_apoyo <- function(base_size = 11) {
theme_minimal(base_size = base_size) +
theme(
plot.title  = element_text(hjust = 0.5, face = "bold"),
plot.subtitle = element_text(hjust = 0.5),
plot.caption  = element_text(hjust = 1),
plot.caption.position = "plot",
legend.position = "right",
panel.grid.minor = element_blank()
)
}
# Función para tipar y añadir año
prep_anio <- function(df, anio) {
nm <- names(df)
df %>%
mutate(
anio = as.integer(anio),
# asegurar tipos
agua_potable     = if ("agua_potable"     %in% nm) as.character(agua_potable) else NA_character_,
agua_todos_dias  = if ("agua_todos_dias"  %in% nm) as.character(agua_todos_dias) else NA_character_,
paga_servicio    = if ("paga_servicio"    %in% nm) as.character(paga_servicio) else NA_character_,
cloro_residual   = if ("cloro_residual"   %in% nm) as.character(cloro_residual) else NA_character_,
departamento     = if ("departamento"     %in% nm) as.character(departamento) else NA_character_,
provincia        = if ("provincia"        %in% nm) as.character(provincia) else NA_character_,
distrito         = if ("distrito"         %in% nm) as.character(distrito) else NA_character_,
horas_dia_diario = if ("horas_dia_diario" %in% nm)
ifelse(horas_dia_diario %in% 1:24, horas_dia_diario, NA_integer_)
else NA_integer_,
gasto_agua_total = if ("gasto_agua_total" %in% nm) as.numeric(gasto_agua_total) else NA_real_
)
}
# Une todas las bases
enaho_all <- bind_rows(
prep_anio(enaho2020, 2020),
prep_anio(enaho2021, 2021),
prep_anio(enaho2022, 2022),
prep_anio(enaho2023, 2023),
prep_anio(enaho2024, 2024)
)
# Define "riesgo":
# 2020: solo No potable
# 2021+: No potable OR cloro inadecuado/sin cloro
enaho_all <- enaho_all %>%
mutate(
riesgo = case_when(
anio == 2020 ~ agua_potable == "No",
anio >= 2021 ~ (agua_potable == "No") | (cloro_residual %in% c("Dosificación inadecuada","Sin cloro")),
TRUE ~ NA
)
)
# geo: "departamento" | "provincia" | "distrito"
indicadores_por_geo <- function(df, geo = c("departamento","provincia","distrito")) {
geo <- match.arg(geo)
stopifnot(geo %in% names(df))
out <- df %>%
group_by(anio, .data[[geo]]) %>%
summarise(
n               = n(),
pct_potable     = mean(agua_potable == "Sí", na.rm = TRUE),
pct_todos_dias  = mean(agua_todos_dias == "Sí", na.rm = TRUE),
pct_paga        = mean(paga_servicio == "Sí", na.rm = TRUE),
pct_riesgo      = mean(riesgo, na.rm = TRUE),
med_horas_dia   = median(horas_dia_diario, na.rm = TRUE),
med_gasto_total = median(gasto_agua_total, na.rm = TRUE),
.groups = "drop"
) %>%
mutate(across(where(is.numeric), ~ ifelse(is.finite(.x), .x, NA_real_))) %>%
rename(geo = !!geo) %>%
mutate(geo = as.character(geo), anio = as.integer(anio))
out
}
# Tablas por departamento y provincia (agrega distrito si lo necesitas)
ind_depto <- indicadores_por_geo(enaho_all, "departamento")
ind_prov  <- indicadores_por_geo(enaho_all, "provincia")
# ind_dist   <- indicadores_por_geo(enaho_all, "distrito")
plot_linea_departamentos <- function(ind_df,
indicador = c("pct_potable","pct_riesgo","pct_todos_dias","pct_paga",
"med_horas_dia","med_gasto_total"),
top_n = 8, ordenar_por = c("ultimo","prom"), formato_pct = TRUE) {
indicador   <- match.arg(indicador)
ordenar_por <- match.arg(ordenar_por)
# Ranking para elegir destacados
rank_df <- ind_df %>%
group_by(geo) %>%
arrange(anio, .by_group = TRUE) %>%
summarise(
val_ultimo = dplyr::last(!!sym(indicador)),
val_prom   = mean(!!sym(indicador), na.rm = TRUE),
.groups = "drop"
) %>%
mutate(orden = ifelse(ordenar_por == "prom", val_prom, val_ultimo)) %>%
arrange(desc(orden))
sel_geos <- head(rank_df$geo, top_n)
# Promedio nacional por año
prom_nac <- ind_df %>%
group_by(anio) %>%
summarise(val = mean(!!sym(indicador), na.rm = TRUE), .groups = "drop")
# Base con todos + flag destacados
base <- ind_df %>%
mutate(destacado = geo %in% sel_geos,
geo = fct_reorder(geo, rank_df$orden[match(geo, rank_df$geo)]))
ggplot() +
# todas las líneas en gris
geom_line(
data = dplyr::filter(base, !destacado),
aes(x = anio, y = !!sym(indicador), group = geo),
linewidth = 0.6, color = "grey80"
) +
# top_n en color
geom_line(
data = dplyr::filter(base, destacado),
aes(x = anio, y = !!sym(indicador), color = geo),
linewidth = 1
) +
geom_point(
data = dplyr::filter(base, destacado),
aes(x = anio, y = !!sym(indicador), color = geo),
size = 2
) +
# promedio nacional
geom_line(
data = prom_nac,
aes(x = anio, y = val),
color = "black", linewidth = 0.9, linetype = 3
) +
scale_x_continuous(breaks = sort(unique(ind_df$anio))) +
{ if (formato_pct) scale_y_continuous(labels = percent) else scale_y_continuous() } +
labs(
title = paste0("Evolución de ", switch(indicador,
pct_potable    = "% de hogares con agua potable",
pct_riesgo     = "% de hogares en riesgo (2020=No potable; 2021+ añade cloro)",
pct_todos_dias = "% con servicio todos los días",
pct_paga       = "% que pagan por el servicio",
med_horas_dia  = "Mediana de horas de servicio al día",
med_gasto_total= "Mediana del gasto mensual en agua (S/)")),
subtitle = paste0("Todos los departamentos (gris) • Top ", top_n,
" destacados (color) • Línea punteada: promedio nacional"),
x = NULL, y = ifelse(formato_pct, "Porcentaje", NULL), color = NULL,
caption = "Fuente: ENAHO 2020–2024"
) +
tema_apoyo()
}
plot_linea_departamentos_facetas <- function(ind_df,
indicador = c("pct_potable","pct_riesgo","pct_todos_dias","pct_paga",
"med_horas_dia","med_gasto_total"),
ncol = 5, formato_pct = TRUE) {
indicador <- match.arg(indicador)
ggplot(ind_df, aes(x = anio, y = !!sym(indicador), group = geo)) +
geom_line(linewidth = 0.8, color = "steelblue") +
geom_point(size = 1.5, color = "steelblue") +
facet_wrap(~ geo, ncol = ncol) +
scale_x_continuous(breaks = sort(unique(ind_df$anio))) +
{ if (formato_pct) scale_y_continuous(labels = percent) else scale_y_continuous() } +
labs(
title = paste0("Evolución por departamento: ", switch(indicador,
pct_potable    = "% con agua potable",
pct_riesgo     = "% en riesgo",
pct_todos_dias = "% con servicio todos los días",
pct_paga       = "% que pagan por el servicio",
med_horas_dia  = "Mediana horas/día",
med_gasto_total= "Mediana gasto mensual (S/)")),
x = NULL, y = ifelse(formato_pct, "Porcentaje", NULL),
caption = "Fuente: ENAHO 2020–2024"
) +
tema_apoyo() +
theme(legend.position = "none")
}
plot_heatmap_delta_2020 <- function(ind_df,
indicador = c("pct_potable","pct_riesgo","pct_todos_dias","pct_paga"),
top_n = Inf) {
indicador <- match.arg(indicador)
base <- ind_df %>%
group_by(geo) %>%
mutate(base2020 = (!!sym(indicador))[anio == 2020][1],
delta = (!!sym(indicador)) - base2020) %>%
ungroup()
# ordenar por mejora 2020→último año
ultimo <- max(ind_df$anio, na.rm = TRUE)
orden <- base %>%
filter(anio == ultimo) %>%
arrange(desc(delta)) %>%
slice_head(n = top_n) %>%
pull(geo)
dfp <- base %>%
filter(geo %in% orden) %>%
mutate(geo = factor(geo, levels = rev(orden)),
anio = factor(anio, levels = sort(unique(ind_df$anio))))
ggplot(dfp, aes(x = anio, y = geo, fill = delta)) +
geom_tile(color = "white", linewidth = 0.3) +
scale_fill_gradient2(low = "#D73027", mid = "white", high = "#1F78B4",
midpoint = 0, labels = percent) +
labs(
title = paste0("Cambio vs 2020: ", switch(indicador,
pct_potable    = "% con agua potable",
pct_riesgo     = "% en riesgo (↓ mejor si negativo)",
pct_todos_dias = "% con servicio todos los días",
pct_paga       = "% que pagan por el servicio")),
subtitle = "Positivo: mejora respecto a 2020 • Negativo: deterioro",
x = "Año", y = NULL, fill = "Δ vs 2020", caption = "Fuente: ENAHO 2020–2024"
) +
tema_apoyo() +
theme(panel.grid = element_blank())
}
# Línea estándar: % con agua potable (Top 10 por último año)
plot_linea_departamentos(ind_depto, indicador = "pct_potable",
top_n = 10, ordenar_por = "ultimo", formato_pct = TRUE)
# Línea estándar: % en riesgo (Top 10 por promedio 2020–24)
plot_linea_departamentos(ind_depto, indicador = "pct_riesgo",
top_n = 10, ordenar_por = "prom", formato_pct = TRUE)
# Facetas: % con servicio todos los días (todos los departamentos)
plot_linea_departamentos_facetas(ind_depto, indicador = "pct_todos_dias", ncol = 5)
# Heatmap cambio vs 2020: % con agua potable (todos)
plot_heatmap_delta_2020(ind_depto, indicador = "pct_potable", top_n = Inf)
setwd("~/GitHub/Tesis_Redes/Redes_Pasco_Ancash_V4/docs/metrics")
library(rio)
red_general = import("resumen_empresas_periodos.csv")
View(red_general)
