<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<title>Redes de contratación por periodo (bipartito)</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;padding:20px;background:#f5f5f5;}
.container{max-width:1200px;margin:0 auto;}
h2{margin-top:0;margin-bottom:10px;}
iframe{width:100%;height:80vh;border:1px solid #ddd;border-radius:8px;background:#fff;}
.bar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-bottom:15px;}
select,button{padding:6px 10px;border-radius:6px;border:1px solid #ccc;background:#fff;cursor:pointer;}
button:hover{background:#f0f0f0;}
.kpi{background:#fff;border:1px solid #ddd;padding:6px 12px;border-radius:6px;}
</style>
</head>
<body>
<div class="container">
  <h2>Redes de contratación — Regiones y empresas por periodo</h2>
  <div class="bar">
    <button onclick="prev()">⟨ Anterior</button>
    <label for="period">Periodo:</label>
    <select id="period" onchange="go(this.value)"></select>
    <button onclick="next()">Siguiente ⟩</button>
    <span class="kpi" id="kpi"></span>
  </div>
  <iframe id="view" src="" loading="lazy"></iframe>
</div>
<script>
const items = [{"p": "2003-2006", "f": "red_2003-2006.html", "density": 0.03123399897593446, "n_regiones": 2, "n_empresas": 61, "n_contratos": 79, "avg_degree": 1.9365079365079365, "n_components": 2, "size_lcc": 43, "diameter_lcc": 2.0, "avg_path_lcc": 1.9534883720930232, "modularity_empresas": 0.0, "hhi_monto_global": 0.10683285530189607}, {"p": "2007-2010", "f": "red_2007-2010.html", "density": 0.006688963210702341, "n_regiones": 2, "n_empresas": 298, "n_contratos": 351, "avg_degree": 2.0, "n_components": 1, "size_lcc": 300, "diameter_lcc": 4.0, "avg_path_lcc": 2.856098104793757, "modularity_empresas": 0.3244170096021948, "hhi_monto_global": 0.10150848641384079}, {"p": "2011-2014", "f": "red_2011-2014.html", "density": 0.004115020241225324, "n_regiones": 2, "n_empresas": 488, "n_contratos": 689, "avg_degree": 2.012244897959184, "n_components": 1, "size_lcc": 490, "diameter_lcc": 4.0, "avg_path_lcc": 2.966520595968449, "modularity_empresas": 0.7400708387347018, "hhi_monto_global": 0.017003551923782074}, {"p": "2015-2018", "f": "red_2015-2018.html", "density": 0.005713376303015835, "n_regiones": 2, "n_empresas": 353, "n_contratos": 463, "avg_degree": 2.0225352112676056, "n_components": 1, "size_lcc": 355, "diameter_lcc": 4.0, "avg_path_lcc": 2.8527094772021964, "modularity_empresas": 0.6195746527777778, "hhi_monto_global": 0.017416977797921254}, {"p": "2019-2022", "f": "red_2019-2022.html", "density": 0.004209763545863131, "n_regiones": 2, "n_empresas": 480, "n_contratos": 666, "avg_degree": 2.024896265560166, "n_components": 1, "size_lcc": 482, "diameter_lcc": 4.0, "avg_path_lcc": 2.8083436133228665, "modularity_empresas": 0.6918282548476453, "hhi_monto_global": 0.009757280234767787}, {"p": "2023-2026", "f": "red_2023-2026.html", "density": 0.019044062733383122, "n_regiones": 2, "n_empresas": 102, "n_contratos": 116, "avg_degree": 1.9615384615384615, "n_components": 2, "size_lcc": 94, "diameter_lcc": 2.0, "avg_path_lcc": 1.9787234042553192, "modularity_empresas": 0.08000000000000004, "hhi_monto_global": 0.06847660133196491}];
let idx = 0;

function fillSelect(){
  const sel = document.getElementById("period");
  sel.innerHTML = "";
  items.forEach((it,i)=>{
    const o = document.createElement("option");
    o.value = i;
    o.textContent = it.p;
    sel.appendChild(o);
  });
}

function updateKPI(){
  const it = items[idx];
  const dens = (it.density !== null && !isNaN(it.density)) ? it.density.toFixed(4) : "—";
  document.getElementById("kpi").innerHTML =
    "<b>Densidad:</b> "+dens+
    " | <b>Regiones:</b> "+it.n_regiones+
    " | <b>Empresas:</b> "+it.n_empresas+
    " | <b>Contratos:</b> "+it.n_contratos;
}

function load(){
  if(!items.length) return;
  const it = items[idx];
  document.getElementById("view").src = it.f;
  document.getElementById("period").selectedIndex = idx;
  updateKPI();
}

function go(i){ idx = parseInt(i); load(); }
function prev(){ idx = (idx - 1 + items.length) % items.length; load(); }
function next(){ idx = (idx + 1) % items.length; load(); }

fillSelect();
load();
</script>
</body>
</html>
